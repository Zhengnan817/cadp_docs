<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9 Technical Details | Getting Started with the Climate Adaptation Data Platform</title>
  <meta name="description" content="9 Technical Details | Getting Started with the Climate Adaptation Data Platform" />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="9 Technical Details | Getting Started with the Climate Adaptation Data Platform" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 Technical Details | Getting Started with the Climate Adaptation Data Platform" />
  
  
  

<meta name="author" content="Brian Lee Yung Rowe" />


<meta name="date" content="2024-06-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-pipelines.html"/>
<link rel="next" href="appendix.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a></li>
<li class="chapter" data-level="2" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>2</b> Overview</a></li>
<li class="chapter" data-level="3" data-path="use-cases.html"><a href="use-cases.html"><i class="fa fa-check"></i><b>3</b> Use Cases</a>
<ul>
<li class="chapter" data-level="3.1" data-path="use-cases.html"><a href="use-cases.html#public-health"><i class="fa fa-check"></i><b>3.1</b> Public health</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="use-cases.html"><a href="use-cases.html#early-warning-systems"><i class="fa fa-check"></i><b>3.1.1</b> Early warning systems</a></li>
<li class="chapter" data-level="3.1.2" data-path="use-cases.html"><a href="use-cases.html#heat-risk"><i class="fa fa-check"></i><b>3.1.2</b> Heat risk</a></li>
<li class="chapter" data-level="3.1.3" data-path="use-cases.html"><a href="use-cases.html#mosquito-borne-infectious-disease"><i class="fa fa-check"></i><b>3.1.3</b> Mosquito-borne infectious disease</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="use-cases.html"><a href="use-cases.html#precision-agriculture"><i class="fa fa-check"></i><b>3.2</b> Precision agriculture</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="use-cases.html"><a href="use-cases.html#dry-soil-forecasting"><i class="fa fa-check"></i><b>3.2.1</b> Dry soil forecasting</a></li>
<li class="chapter" data-level="3.2.2" data-path="use-cases.html"><a href="use-cases.html#watering-schedules"><i class="fa fa-check"></i><b>3.2.2</b> Watering schedules</a></li>
<li class="chapter" data-level="3.2.3" data-path="use-cases.html"><a href="use-cases.html#crop-development"><i class="fa fa-check"></i><b>3.2.3</b> Crop development</a></li>
<li class="chapter" data-level="3.2.4" data-path="use-cases.html"><a href="use-cases.html#risk-protocol-for-dry-soil"><i class="fa fa-check"></i><b>3.2.4</b> Risk protocol for dry soil</a></li>
<li class="chapter" data-level="3.2.5" data-path="use-cases.html"><a href="use-cases.html#irrigation-control"><i class="fa fa-check"></i><b>3.2.5</b> Irrigation control</a></li>
<li class="chapter" data-level="3.2.6" data-path="use-cases.html"><a href="use-cases.html#freeze-warnings"><i class="fa fa-check"></i><b>3.2.6</b> Freeze warnings</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="use-cases.html"><a href="use-cases.html#hotter-times"><i class="fa fa-check"></i><b>3.3</b> Hotter Times</a></li>
<li class="chapter" data-level="3.4" data-path="use-cases.html"><a href="use-cases.html#mobile-app"><i class="fa fa-check"></i><b>3.4</b> Mobile app</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="physical-infrastructure.html"><a href="physical-infrastructure.html"><i class="fa fa-check"></i><b>4</b> Physical Infrastructure</a></li>
<li class="chapter" data-level="5" data-path="device-operation.html"><a href="device-operation.html"><i class="fa fa-check"></i><b>5</b> Device Operation</a></li>
<li class="chapter" data-level="6" data-path="cadp-architecture.html"><a href="cadp-architecture.html"><i class="fa fa-check"></i><b>6</b> CADP Architecture</a>
<ul>
<li class="chapter" data-level="6.1" data-path="cadp-architecture.html"><a href="cadp-architecture.html#design-principles"><i class="fa fa-check"></i><b>6.1</b> Design principles</a></li>
<li class="chapter" data-level="6.2" data-path="cadp-architecture.html"><a href="cadp-architecture.html#database"><i class="fa fa-check"></i><b>6.2</b> Database</a></li>
<li class="chapter" data-level="6.3" data-path="cadp-architecture.html"><a href="cadp-architecture.html#sensor-data-ingestion"><i class="fa fa-check"></i><b>6.3</b> Sensor data ingestion</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="cadp-architecture.html"><a href="cadp-architecture.html#raw-sensor-data"><i class="fa fa-check"></i><b>6.3.1</b> Raw sensor data</a></li>
<li class="chapter" data-level="6.3.2" data-path="cadp-architecture.html"><a href="cadp-architecture.html#data-issues"><i class="fa fa-check"></i><b>6.3.2</b> Data issues</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="cadp-architecture.html"><a href="cadp-architecture.html#weather-forecasting"><i class="fa fa-check"></i><b>6.4</b> Weather forecasting</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="cadp-architecture.html"><a href="cadp-architecture.html#ecmwf-forecasts"><i class="fa fa-check"></i><b>6.4.1</b> ECMWF forecasts</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="cadp-architecture.html"><a href="cadp-architecture.html#early-warning-system"><i class="fa fa-check"></i><b>6.5</b> Early warning system</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="plugins.html"><a href="plugins.html"><i class="fa fa-check"></i><b>7</b> Plugins</a>
<ul>
<li class="chapter" data-level="7.1" data-path="plugins.html"><a href="plugins.html#forecasting-plugins"><i class="fa fa-check"></i><b>7.1</b> Forecasting plugins</a></li>
<li class="chapter" data-level="7.2" data-path="plugins.html"><a href="plugins.html#risk-protocols"><i class="fa fa-check"></i><b>7.2</b> Risk protocols</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-pipelines.html"><a href="data-pipelines.html"><i class="fa fa-check"></i><b>8</b> Data Pipelines</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-pipelines.html"><a href="data-pipelines.html#ecmwf-baseline-forecasts"><i class="fa fa-check"></i><b>8.1</b> ECMWF baseline forecasts</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="data-pipelines.html"><a href="data-pipelines.html#data-extraction"><i class="fa fa-check"></i><b>8.1.1</b> Data extraction</a></li>
<li class="chapter" data-level="8.1.2" data-path="data-pipelines.html"><a href="data-pipelines.html#data-normalization"><i class="fa fa-check"></i><b>8.1.2</b> Data normalization</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="data-pipelines.html"><a href="data-pipelines.html#sensor-normalization"><i class="fa fa-check"></i><b>8.2</b> Sensor normalization</a></li>
<li class="chapter" data-level="8.3" data-path="data-pipelines.html"><a href="data-pipelines.html#temperature-forecast"><i class="fa fa-check"></i><b>8.3</b> Temperature forecast</a></li>
<li class="chapter" data-level="8.4" data-path="data-pipelines.html"><a href="data-pipelines.html#precipitation-forecast"><i class="fa fa-check"></i><b>8.4</b> Precipitation forecast</a></li>
<li class="chapter" data-level="8.5" data-path="data-pipelines.html"><a href="data-pipelines.html#disk-space-monitoring"><i class="fa fa-check"></i><b>8.5</b> Disk space monitoring</a></li>
<li class="chapter" data-level="8.6" data-path="data-pipelines.html"><a href="data-pipelines.html#battery-level-monitoring"><i class="fa fa-check"></i><b>8.6</b> Battery level monitoring</a></li>
<li class="chapter" data-level="8.7" data-path="data-pipelines.html"><a href="data-pipelines.html#location-change"><i class="fa fa-check"></i><b>8.7</b> Location change</a></li>
<li class="chapter" data-level="8.8" data-path="data-pipelines.html"><a href="data-pipelines.html#device-availability"><i class="fa fa-check"></i><b>8.8</b> Device availability</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="technical-details.html"><a href="technical-details.html"><i class="fa fa-check"></i><b>9</b> Technical Details</a>
<ul>
<li class="chapter" data-level="9.1" data-path="technical-details.html"><a href="technical-details.html#system-requirements"><i class="fa fa-check"></i><b>9.1</b> System requirements</a></li>
<li class="chapter" data-level="9.2" data-path="technical-details.html"><a href="technical-details.html#project-structure"><i class="fa fa-check"></i><b>9.2</b> Project structure</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="technical-details.html"><a href="technical-details.html#ecm-etl"><i class="fa fa-check"></i><b>9.2.1</b> ECM ETL</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="technical-details.html"><a href="technical-details.html#sensor-api"><i class="fa fa-check"></i><b>9.3</b> Sensor API</a></li>
<li class="chapter" data-level="9.4" data-path="technical-details.html"><a href="technical-details.html#sensor-etl"><i class="fa fa-check"></i><b>9.4</b> Sensor ETL</a></li>
<li class="chapter" data-level="9.5" data-path="technical-details.html"><a href="technical-details.html#local-data-cache"><i class="fa fa-check"></i><b>9.5</b> Local data cache</a></li>
<li class="chapter" data-level="9.6" data-path="technical-details.html"><a href="technical-details.html#initialization"><i class="fa fa-check"></i><b>9.6</b> Initialization</a></li>
<li class="chapter" data-level="9.7" data-path="technical-details.html"><a href="technical-details.html#building-images"><i class="fa fa-check"></i><b>9.7</b> Building images</a></li>
<li class="chapter" data-level="9.8" data-path="technical-details.html"><a href="technical-details.html#running-a-container"><i class="fa fa-check"></i><b>9.8</b> Running a container</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>10</b> Appendix</a>
<ul>
<li class="chapter" data-level="10.1" data-path="appendix.html"><a href="appendix.html#appendix-a-shell-scripts"><i class="fa fa-check"></i><b>10.1</b> Appendix A: Shell scripts</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="appendix.html"><a href="appendix.html#extract-ecmwf-forecasts"><i class="fa fa-check"></i><b>10.1.1</b> Extract ECMWF forecasts</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Getting Started with the Climate Adaptation Data Platform</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="technical-details" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number">9</span> Technical Details<a href="technical-details.html#technical-details" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The source code for the system is available in a Git repository located
at .</p>
<p>The kanban board to manage the project is at
.</p>
<p>If you do not have access to either of these locations,
email me at  to get access.</p>
<div id="system-requirements" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">9.1</span> System requirements<a href="technical-details.html#system-requirements" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The project works in Linux and uses numerous UNIX tools.
If on Windows, install the Linux Subsystem on Windows.
</p>
<p>At a minimum, the Linux system requires</p>
<ul>
<li>bash (pre-installed)</li>
<li>make (standard, probably already installed)</li>
<li>gcc (standard, probably already installed)</li>
<li>git</li>
<li>docker</li>
</ul>
<p>The code should work on all debian flavors of Linux.</p>
</div>
<div id="project-structure" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">9.2</span> Project structure<a href="technical-details.html#project-structure" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This project provides stubs for the main components of the system.
These components correspond to the components and tasks discussed earlier.</p>
<div id="ecm-etl" class="section level3 hasAnchor" number="9.2.1">
<h3><span class="header-section-number">9.2.1</span> ECM ETL<a href="technical-details.html#ecm-etl" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The web server is a Go server defined in <code>invoke.go</code>.
This follows a practice defined by GCP for exposing shell scripts as an API.</p>
<ul>
<li>port: 8080</li>
</ul>
<pre><code>cd ecm_etl
make build run logs</code></pre>
</div>
</div>
<div id="sensor-api" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">9.3</span> Sensor API<a href="technical-details.html#sensor-api" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The web server is a Python Falcon server.</p>
<ul>
<li>port: 8075</li>
</ul>
<pre><code>cd sensor_api
make build run logs</code></pre>
</div>
<div id="sensor-etl" class="section level2 hasAnchor" number="9.4">
<h2><span class="header-section-number">9.4</span> Sensor ETL<a href="technical-details.html#sensor-etl" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The web server is an R OpenCPU server (running atop Apahce).</p>
<ul>
<li>port: 8004</li>
</ul>
<pre><code>cd sensor_etl
make build run logs</code></pre>
</div>
<div id="local-data-cache" class="section level2 hasAnchor" number="9.5">
<h2><span class="header-section-number">9.5</span> Local data cache<a href="technical-details.html#local-data-cache" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The directory  within the base directory of the project
stores data locally and is not committed to the repo.
Within this directory are sub directories that correspond to the inputs and
outputs of the components.
In the following table, the Cloud column indicates whether the data need to
be persisted in the cloud or not.
In general, temporary files do not need to be persisted.</p>
</div>
<div id="initialization" class="section level2 hasAnchor" number="9.6">
<h2><span class="header-section-number">9.6</span> Initialization<a href="technical-details.html#initialization" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The project needs to be initialized after downloading.
Running the following script will do that.</p>
<pre><code>./bin/init_project.sh</code></pre>
</div>
<div id="building-images" class="section level2 hasAnchor" number="9.7">
<h2><span class="header-section-number">9.7</span> Building images<a href="technical-details.html#building-images" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>All images can be built using the corresponding <code>Makefile</code> command <code>make build</code>.</p>
</div>
<div id="running-a-container" class="section level2 hasAnchor" number="9.8">
<h2><span class="header-section-number">9.8</span> Running a container<a href="technical-details.html#running-a-container" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Each component image uses the same <code>Makefile</code> command to start a container.
The command <code>make run</code> starts the container in daemon mode.
To view logs use <code>make logs</code>.</p>
<p>The full build and run sequence can be executed in a single command:
<code>make build run logs</code>.</p>
<p>To inspect the running container, use <code>make bash</code>,
which will attach a bash shell to the running container.</p>
<p>To stop the container, use <code>make stop</code>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-pipelines.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
